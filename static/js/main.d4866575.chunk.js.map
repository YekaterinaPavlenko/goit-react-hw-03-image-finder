{"version":3,"sources":["components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.js","services/pixabayApi.js","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Notifications/Notifications.js","App.js","index.js","components/Searchbar/Searchbar.module.css","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.module.css"],"names":["module","exports","Searchbar","state","query","handleChange","e","setState","currentTarget","value","handleSubmit","preventDefault","props","onSubmit","this","className","sbs","SearchForm","input","type","autoComplete","autoFocus","placeholder","onChange","name","button","button_label","Component","fetchImages","searchQuery","page","url","fetch","then","response","json","hits","ImageGalleryItem","elem","getImgForModal","webformatURL","tags","gis","src","alt","image","onClick","Modal","closeModal","target","nodeName","code","hideModal","window","addEventListener","removeEventListener","ms","Overlay","children","ImageGallery","showModal","toggleModal","gallery","largeImageURL","igs","map","item","id","Button","getNewPage","bs","data-action","Notifications","fetchLength","galleryLength","error","defaultProps","App","isLoading","getQueryByForm","setNewPage","prevState","fetchImagesByQuery","prevProps","result","length","catch","finally","scrollTo","top","document","documentElement","scrollHeight","behavior","color","height","width","timeout","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d4866575.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__8p-Tn\",\"Modal\":\"Modal_Modal__PeHcL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3OTC_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__19KI7\"};","import React, { Component } from 'react';\r\nimport sbs from './Searchbar.module.css';\r\nimport PropTypes from 'prop-types';\r\n// import Notifications from '../Notifications/Notifications';\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    query: '',\r\n    // noQuery: '',\r\n  };\r\n  handleChange = e => {\r\n    this.setState({ query: e.currentTarget.value });\r\n  };\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    // console.log(this.state.query);\r\n    const { query } = this.state;\r\n    this.props.onSubmit({ query });\r\n    this.setState({ query: '' });\r\n    //  query !== '' &&\r\n    // this.reset();\r\n  };\r\n  render() {\r\n    const { query } = this.state;\r\n    // console.log(query);\r\n    return (\r\n      <header className={sbs.Searchbar}>\r\n        <form className={sbs.SearchForm} onSubmit={this.handleSubmit}>\r\n          <input\r\n            className={sbs.input}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.handleChange}\r\n            name=\"query\"\r\n            value={query}\r\n          />\r\n          <button type=\"submit\" className={sbs.button}>\r\n            <span className={sbs.button_label}>Search</span>\r\n          </button>\r\n        </form>\r\n        {/* <Notifications searchQuery={query} /> */}\r\n      </header>\r\n    );\r\n  }\r\n}\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\nexport default Searchbar;\r\n","const apiKey = '19851067-7c860a6e23d51e90a164e5364';\r\n\r\nfunction fetchImages(searchQuery, page) {\r\n  // console.log(searchQuery);\r\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${searchQuery}&image_type=photo&orientation=horizontal&page=${page}&per_page=12`;\r\n\r\n  return fetch(url)\r\n    .then(response => {\r\n      // console.log(response);\r\n      return response.json();\r\n    })\r\n    .then(({ hits }) => {\r\n      // console.log({ hits });\r\n      return hits;\r\n    });\r\n}\r\n\r\nexport default fetchImages;\r\n","import React from 'react';\r\nimport gis from './ImageGalleryItem.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst ImageGalleryItem = ({ elem, getImgForModal }) => {\r\n  // console.log(elem);\r\n  const { webformatURL, tags } = elem;\r\n  // console.log(largeImageURL);\r\n  return (\r\n    <li className={gis.ImageGalleryItem}>\r\n      <img\r\n        src={webformatURL}\r\n        alt={tags}\r\n        className={gis.image}\r\n        onClick={() => getImgForModal({ elem })}\r\n      />\r\n    </li>\r\n  );\r\n};\r\nImageGalleryItem.propTypes = {\r\n  elem: PropTypes.shape({\r\n    webformatURL: PropTypes.string.isRequired,\r\n    tags: PropTypes.string.isRequired,\r\n  }).isRequired,\r\n  getImgForModal: PropTypes.func.isRequired,\r\n};\r\nexport default ImageGalleryItem;\r\n","import React, { Component } from 'react';\r\nimport ms from './Modal.module.css';\r\nimport PropTypes from 'prop-types';\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.closeModal);\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.closeModal);\r\n  }\r\n\r\n  closeModal = e => {\r\n    if (e.target.nodeName !== 'IMG' || e.code === 'Escape') {\r\n      this.props.hideModal();\r\n    }\r\n  };\r\n  render() {\r\n    return (\r\n      <div className={ms.Overlay} onClick={this.closeModal}>\r\n        <div className={ms.Modal}>{this.props.children}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nModal.propTypes = {\r\n  hideModal: PropTypes.func.isRequired,\r\n};\r\nexport default Modal;\r\n","import React, { Component } from 'react';\r\nimport igs from './ImageGallery.module.css';\r\nimport PropTypes from 'prop-types';\r\nimport ImageGalleryItem from './ImageGalleryItem/ImageGalleryItem';\r\nimport Modal from '../Modal/Modal';\r\nclass ImageGallery extends Component {\r\n  state = {\r\n    elem: '',\r\n    showModal: false,\r\n  };\r\n  toggleModal = () => {\r\n    this.setState({\r\n      showModal: !this.state.showModal,\r\n    });\r\n  };\r\n  getImgForModal = ({ elem }) => {\r\n    // e.preventDefault();\r\n    // console.log(elem);\r\n    if (elem) {\r\n      this.toggleModal();\r\n      this.setState({\r\n        elem,\r\n      });\r\n    }\r\n  };\r\n  render() {\r\n    const { showModal, elem } = this.state;\r\n    const { gallery } = this.props;\r\n    // console.log(elem);\r\n    const { tags, largeImageURL } = elem;\r\n    return (\r\n      <ul className={igs.ImageGallery}>\r\n        {gallery.map(item => {\r\n          // console.log(item);\r\n          return (\r\n            <ImageGalleryItem\r\n              key={item.id}\r\n              elem={item}\r\n              getImgForModal={this.getImgForModal}\r\n            />\r\n          );\r\n        })}\r\n        {showModal && (\r\n          <Modal hideModal={this.toggleModal}>\r\n            <img src={largeImageURL} alt={tags} />\r\n          </Modal>\r\n        )}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\nImageGallery.propTypes = {\r\n  gallery: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.number.isRequired,\r\n    }),\r\n  ).isRequired,\r\n  //   deleteContact: PropTypes.func.isRequired,\r\n};\r\nexport default ImageGallery;\r\n","import React from 'react';\r\nimport bs from './Button.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Button = ({ getNewPage }) => {\r\n  // console.log(getNewPage);\r\n  return (\r\n    <button\r\n      className={bs.Button}\r\n      type=\"button\"\r\n      data-action=\"load-more\"\r\n      // disabled={true}\r\n      onClick={getNewPage}\r\n    >\r\n      Show more\r\n    </button>\r\n  );\r\n};\r\nButton.propTypes = {\r\n  getNewPage: PropTypes.func.isRequired,\r\n};\r\nexport default Button;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nconst Notifications = ({ fetchLength, galleryLength, searchQuery, error }) => {\r\n  // console.log(searchQuery);\r\n  // console.log(error);\r\n  if (error) {\r\n    // console.log(error);\r\n    return <p>Oops! Something wrong! Request error!</p>;\r\n  } else if (!error) {\r\n    if (!searchQuery) {\r\n      return <p>Please enter image name!</p>;\r\n    } else if (searchQuery) {\r\n      if (!fetchLength && !galleryLength) {\r\n        return <p>Image not found. Please check your request and try again!</p>;\r\n      } else if (fetchLength < 12 && galleryLength > 0) {\r\n        return <p>These are all the images we found!</p>;\r\n      }\r\n    }\r\n  }\r\n\r\n  return <p></p>;\r\n};\r\nNotifications.defaultProps = {\r\n  fetchLength: 0,\r\n  galleryLength: 0,\r\n  searchQuery: '',\r\n  error: false,\r\n};\r\nNotifications.propTypes = {\r\n  fetchLength: PropTypes.number,\r\n  galleryLength: PropTypes.number,\r\n  searchQuery: PropTypes.string,\r\n  error: PropTypes.bool,\r\n};\r\nexport default Notifications;\r\n","import React, { Component } from 'react';\nimport './App.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport Loader from 'react-loader-spinner';\nimport Searchbar from './components/Searchbar/Searchbar';\nimport fetchImages from './services/pixabayApi';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport Button from './components/Button/Button';\nimport Notifications from './components/Notifications/Notifications';\n\nclass App extends Component {\n  state = {\n    query: '',\n    page: 1,\n    gallery: [],\n    fetchLength: null,\n    isLoading: false,\n    error: false,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    // console.log('я обновился');\n\n    const { query, page } = this.state;\n    if (query !== prevState.query) {\n      this.fetchImagesByQuery(query);\n    } else if (query === prevState.query && page !== prevState.page) {\n      this.fetchImagesByQuery(query);\n    }\n  }\n\n  getQueryByForm = ({ query }) => {\n    this.setState({ query: query, page: 1, gallery: [] });\n  };\n\n  setNewPage = e => {\n    e.preventDefault();\n    this.setState(prevState => ({\n      page: prevState.page + 1,\n    }));\n  };\n\n  fetchImagesByQuery = (prevProps, prevState) => {\n    const { query, page } = this.state;\n\n    this.setState({ isLoading: true });\n    fetchImages(query, page)\n      .then(result => {\n        // console.log(result);\n        this.setState(prevState => ({\n          gallery: [...prevState.gallery, ...result],\n          fetchLength: result.length,\n        }));\n      })\n      .catch(error => {\n        this.setState({ error: true });\n      })\n      .finally(() => {\n        this.setState({ isLoading: false });\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n      });\n    // }\n  };\n  render() {\n    const { gallery, fetchLength, isLoading, query, error } = this.state;\n    // console.log(fetchLength);\n    // const visibleContacts = this.getVisibleContacts();\n    return (\n      <div className=\"App\">\n        <h1>Search image</h1>\n        <Searchbar onSubmit={this.getQueryByForm} />\n        <ImageGallery gallery={gallery} />\n        {isLoading && (\n          <Loader\n            type=\"ThreeDots\"\n            color=\"#3f51b5\"\n            height={100}\n            width={100}\n            timeout={3000} //3 secs\n          />\n        )}\n        {fetchLength === 12 && !isLoading && (\n          <Button getNewPage={this.setNewPage} />\n        )}\n\n        <Notifications\n          fetchLength={fetchLength}\n          galleryLength={gallery.length}\n          searchQuery={query}\n          error={error}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1yKEF\",\"SearchForm\":\"Searchbar_SearchForm__4w_4z\",\"button\":\"Searchbar_button__2wf8h\",\"button_label\":\"Searchbar_button_label__2TRaB\",\"input\":\"Searchbar_input__2ab8B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__dLnIm\",\"image\":\"ImageGalleryItem_image__1Wgm6\"};"],"sourceRoot":""}